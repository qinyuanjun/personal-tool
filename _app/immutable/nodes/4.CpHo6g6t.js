import"../chunks/DsnmJJEf.js";import{g as $e,h as ht,m as me,i as B,j as yt,G as _t,B as d,W as bt,J as xt,K as gt,M as Ce,l as pe,n as Z,C as wt,aQ as Et,a7 as we,a9 as At,a3 as kt,aT as St,as as Pe,aO as et,ag as Tt,aY as ce,a4 as tt,a6 as Mt,aZ as de,a_ as Ct,a$ as he,a5 as at,k as Pt,b0 as zt,aN as Nt,b1 as Ht,R as Lt,b2 as rt,u as Wt,aA as ze,b3 as Ut,aS as Dt,y as It,at as Ot,E as Rt,b4 as Ft,p as qt,f as q,s as O,a as j,t as J,b as H,c as Gt,$ as Bt,d as G,b5 as Jt,r as D,aW as U,aX as ie,aV as Ne,Q as He}from"../chunks/CDaAO9rn.js";import{c as Kt,o as Qt,d as Vt,e as Yt,s as $}from"../chunks/DB9V1iXJ.js";import{p as Xt,i as Y}from"../chunks/DyV5ev0R.js";import{h as Zt}from"../chunks/CBbRpddn.js";import{r as jt,a as Le,s as We}from"../chunks/B8P-iSQw.js";import{t as $t,c as ea}from"../chunks/BRzKQYUk.js";import{i as ta,a as aa,b as ra,c as sa}from"../chunks/XpEKo_0F.js";function na(a,t){return t}function ia(a,t,r){for(var c=a.items,s=[],u=t.length,i=0;i<u;i++)zt(t[i].e,s,!0);var f=u>0&&s.length===0&&r!==null;if(f){var _=r.parentNode;Nt(_),_.append(r),c.clear(),F(a,t[0].prev,t[u-1].next)}Ht(s,()=>{for(var x=0;x<u;x++){var A=t[x];f||(c.delete(A.k),F(a,A.prev,A.next)),at(A.e,!f)}})}function oe(a,t,r,c,s,u=null){var i=a,f={flags:t,items:new Map,first:null},_=(t&rt)!==0;if(_){var x=a;i=B?me(yt(x)):x.appendChild($e())}B&&_t();var A=null,z=!1,M=new Map,S=bt(()=>{var g=r();return Tt(g)?g:g==null?[]:et(g)}),o,p;function v(){oa(p,o,f,M,i,s,t,c,r),u!==null&&(o.length===0?A?tt(A):A=we(()=>u(i)):A!==null&&Mt(A,()=>{A=null}))}ht(()=>{p??=Lt,o=d(S);var g=o.length;if(z&&g===0)return;z=g===0;let C=!1;if(B){var m=xt(i)===gt;m!==(g===0)&&(i=Ce(),me(i),pe(!1),C=!0)}if(B){for(var y=null,b,l=0;l<g;l++){if(Z.nodeType===wt&&Z.data===Et){i=Z,C=!0,pe(!1);break}var e=o[l],n=c(e,l);b=Ee(Z,f,y,null,e,n,l,s,t,r),f.items.set(n,b),y=b}g>0&&me(Ce())}if(B)g===0&&u&&(A=we(()=>u(i)));else if(At()){var h=new Set,T=kt;for(l=0;l<g;l+=1){e=o[l],n=c(e,l);var k=f.items.get(n)??M.get(n);k?(t&(de|ce))!==0&&st(k,e,l,t):(b=Ee(null,f,null,null,e,n,l,s,t,r,!0),M.set(n,b)),h.add(n)}for(const[w,E]of f.items)h.has(w)||T.skipped_effects.add(E.e);T.oncommit(v)}else v();C&&pe(!0),d(S)}),B&&(i=Z)}function oa(a,t,r,c,s,u,i,f,_){var x=(i&Ut)!==0,A=(i&(de|ce))!==0,z=t.length,M=r.items,S=r.first,o=S,p,v=null,g,C=[],m=[],y,b,l,e;if(x)for(e=0;e<z;e+=1)y=t[e],b=f(y,e),l=M.get(b),l!==void 0&&(l.a?.measure(),(g??=new Set).add(l));for(e=0;e<z;e+=1){if(y=t[e],b=f(y,e),l=M.get(b),l===void 0){var n=c.get(b);if(n!==void 0){c.delete(b),M.set(b,n);var h=v?v.next:o;F(r,v,n),F(r,n,h),ye(n,h,s),v=n}else{var T=o?o.e.nodes_start:s;v=Ee(T,r,v,v===null?r.first:v.next,y,b,e,u,i,_)}M.set(b,v),C=[],m=[],o=v.next;continue}if(A&&st(l,y,e,i),(l.e.f&he)!==0&&(tt(l.e),x&&(l.a?.unfix(),(g??=new Set).delete(l))),l!==o){if(p!==void 0&&p.has(l)){if(C.length<m.length){var k=m[0],w;v=k.prev;var E=C[0],L=C[C.length-1];for(w=0;w<C.length;w+=1)ye(C[w],k,s);for(w=0;w<m.length;w+=1)p.delete(m[w]);F(r,E.prev,L.next),F(r,v,E),F(r,L,k),o=k,v=L,e-=1,C=[],m=[]}else p.delete(l),ye(l,o,s),F(r,l.prev,l.next),F(r,l,v===null?r.first:v.next),F(r,v,l),v=l;continue}for(C=[],m=[];o!==null&&o.k!==b;)(o.e.f&he)===0&&(p??=new Set).add(o),m.push(o),o=o.next;if(o===null)continue;l=o}C.push(l),v=l,o=l.next}if(o!==null||p!==void 0){for(var P=p===void 0?[]:et(p);o!==null;)(o.e.f&he)===0&&P.push(o),o=o.next;var I=P.length;if(I>0){var N=(i&rt)!==0&&z===0?s:null;if(x){for(e=0;e<I;e+=1)P[e].a?.measure();for(e=0;e<I;e+=1)P[e].a?.fix()}ia(r,P,N)}}x&&Wt(()=>{if(g!==void 0)for(l of g)l.a?.apply()}),a.first=r.first&&r.first.e,a.last=v&&v.e;for(var W of c.values())at(W.e);c.clear()}function st(a,t,r,c){(c&de)!==0&&ze(a.v,t),(c&ce)!==0?ze(a.i,r):a.i=r}function Ee(a,t,r,c,s,u,i,f,_,x,A){var z=(_&de)!==0,M=(_&Ct)===0,S=z?M?St(s,!1,!1):Pe(s):s,o=(_&ce)===0?i:Pe(i),p={i:o,v:S,k:u,a:null,e:null,prev:r,next:c};try{if(a===null){var v=document.createDocumentFragment();v.append(a=$e())}return p.e=we(()=>f(a,S,o,x),B),p.e.prev=r&&r.e,p.e.next=c&&c.e,r===null?A||(t.first=p):(r.next=p,r.e.next=p.e),c!==null&&(c.prev=p,c.e.prev=p.e),p}finally{}}function ye(a,t,r){for(var c=a.next?a.next.e.nodes_start:r,s=t?t.e.nodes_start:r,u=a.e.nodes_start;u!==null&&u!==c;){var i=Pt(u);s.before(u),u=i}}function F(a,t,r){t===null?a.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function Ue(a,t,r){Dt(()=>{var c=It(()=>t(a,r?.())||{});if(r&&c?.update){var s=!1,u={};Ot(()=>{var i=r();Rt(i),s&&Ft(u,i)&&(u=i,c.update(i))}),s=!0}if(c?.destroy)return()=>c.destroy()})}function ee(a,t,r,c,s,u){var i=a.__className;if(B||i!==r||i===void 0){var f=$t(r,c,u);(!B||f!==a.getAttribute("class"))&&(f==null?a.removeAttribute("class"):a.className=f),a.__className=r}else if(u&&s!==u)for(var _ in u){var x=!!u[_];(s==null||x!==!!s[_])&&a.classList.toggle(_,x)}return u}class la{#e;#t;constructor(t,r){this.#e=t,this.#t=Kt(r)}get current(){return this.#t(),this.#e()}}const ca=/\(.+\)/,da=new Set(["all","print","screen","and","or","not","only"]);class ua extends la{constructor(t,r){let c=ca.test(t)||t.split(/[\s,]+/).some(u=>da.has(u.trim()))?t:`(${t})`;const s=window.matchMedia(c);super(()=>s.matches,u=>Qt(s,"change",u))}}function fa(a){const t=JSON.parse(a);return t.data&&(t.data=ra(t.data,sa.decoders)),t}function _e(a){return HTMLElement.prototype.cloneNode.call(a)}function va(a,t=()=>{}){const r=async({action:s,result:u,reset:i=!0,invalidateAll:f=!0})=>{u.type==="success"&&(i&&HTMLFormElement.prototype.reset.call(a),f&&await ta()),(location.origin+location.pathname===s.origin+s.pathname||u.type==="redirect"||u.type==="error")&&await aa(u)};async function c(s){if((s.submitter?.hasAttribute("formmethod")?s.submitter.formMethod:_e(a).method)!=="post")return;s.preventDefault();const i=new URL(s.submitter?.hasAttribute("formaction")?s.submitter.formAction:_e(a).action),f=s.submitter?.hasAttribute("formenctype")?s.submitter.formEnctype:_e(a).enctype,_=new FormData(a,s.submitter),x=new AbortController;let A=!1;const M=await t({action:i,cancel:()=>A=!0,controller:x,formData:_,formElement:a,submitter:s.submitter})??r;if(A)return;let S;try{const o=new Headers({accept:"application/json","x-sveltekit-action":"true"});f!=="multipart/form-data"&&o.set("Content-Type",/^(:?application\/x-www-form-urlencoded|text\/plain)$/.test(f)?f:"application/x-www-form-urlencoded");const p=f==="multipart/form-data"?_:new URLSearchParams(_),v=await fetch(i,{method:"POST",headers:o,cache:"no-store",body:p,signal:x.signal});S=fa(await v.text()),S.type==="error"&&(S.status=v.status)}catch(o){if(o?.name==="AbortError")return;S={type:"error",error:o}}await M({action:i,formData:_,formElement:a,update:o=>r({action:i,result:S,reset:o?.reset,invalidateAll:o?.invalidateAll}),result:S})}return HTMLFormElement.prototype.addEventListener.call(a,"submit",c),{destroy(){HTMLFormElement.prototype.removeEventListener.call(a,"submit",c)}}}var De="mz3PUW_p",Ie=["#FFC700","#FF0000","#2E3191","#41BBC7"],Oe=3500,Re=.5,Fe=150,qe="mix",Ge=12,Be="",Je=!0,Ke=800,Qe=1600;function ma(a,t={}){let{colors:r=Ie,duration:c=Oe,force:s=Re,particleCount:u=Fe,particleShape:i=qe,particleSize:f=Ge,particleClass:_=Be,destroyAfterDone:x=Je,stageHeight:A=Ke,stageWidth:z=Qe}=t;(function(m){if(document.querySelector("style[data-neoconfetti]"))return;const y=be("style");y.dataset.neoconfetti="",y.textContent=m,xe(document.head,y)})('@keyframes mz3PUW_ya{to{translate:0 var(--sh)}}@keyframes mz3PUW_xa{to{translate:var(--xlp)0}}@keyframes mz3PUW_r{50%{rotate:var(--hr)180deg}to{rotate:var(--r)360deg}}.mz3PUW_c{z-index:1200;width:0;height:0;position:relative;overflow:visible}.mz3PUW_p{animation:xa var(--dc)forwards cubic-bezier(var(--x1),var(--x2),var(--x3),var(--x4));animation-name:mz3PUW_xa}.mz3PUW_p>div{animation:ya var(--dc)forwards cubic-bezier(var(--y1),var(--y2),var(--y3),var(--y4));width:var(--w);height:var(--h);animation-name:mz3PUW_ya;position:absolute;top:0;left:0}.mz3PUW_p>div:before{content:"";background-color:var(--bgc);animation:r var(--rd)infinite linear;border-radius:var(--br);width:100%;height:100%;animation-name:mz3PUW_r;display:block}'),a.classList.add("mz3PUW_c"),a.style.setProperty("--sh",A+"px");let M=[],S=[];const o=()=>te(R()*(ba-1)),p=(m,y)=>i!=="rectangles"&&(m==="circles"||xa(y));function v(m,y){const b=o(),l=p(i,b),e=(T,k)=>m.style.setProperty(T,k+"");e("--xlp",ge(le(Ze(y,90)-180),0,180,-z/2,z/2)+"px"),e("--dc",c-te(1e3*R())+"ms");const n=R()<ha?X(R()*ya,2):0;e("--x1",n),e("--x2",-1*n),e("--x3",n),e("--x4",X(le(ge(le(Ze(y,90)-180),0,180,-1,1)),4)),e("--y1",X(R()*Ye,4)),e("--y2",X(R()*s*(nt()?1:-1),4)),e("--y3",Ye),e("--y4",X(_a(ge(le(y-180),0,180,s,-s),0),4)),e("--w",(l?f:te(4*R())+f/2)+"px"),e("--h",(l?f:te(2*R())+f)+"px");const h=b.toString(2).padStart(3,"0").split("");e("--hr",h.map((T=>+T/2+"")).join(" ")),e("--r",h.join(" ")),e("--rd",X(R()*(pa-Ve)+Ve)+"ms"),e("--br",l?"50%":0)}let g;function C(){a.innerHTML="",clearTimeout(g),M=Xe(u,r),S=(function(m,y=[],b){const l=[];for(const{color:e}of y){const n=be("div");n.className=`${De} ${b}`,n.style.setProperty("--bgc",e);const h=be("div");xe(n,h),xe(m,n),l.push(n)}return l})(a,M,_);for(const[m,y]of je(S))v(y,M[+m].degree);g=setTimeout((()=>{x&&(a.innerHTML="")}),c)}return C(),{update(m){const y=m.particleCount??Fe,b=m.particleShape??qe,l=m.particleSize??Ge,e=m.particleClass??Be,n=m.colors??Ie,h=m.stageHeight??Ke,T=m.duration??Oe,k=m.force??Re,w=m.stageWidth??Qe,E=m.destroyAfterDone??Je;M=Xe(y,n);let L=!1;if(y===u){S=Array.from(a.querySelectorAll(`.${De}`));for(const[P,{color:I}]of je(M)){const N=S[+P];JSON.stringify(r)!==JSON.stringify(n)&&N.style.setProperty("--bgc",I),b!==i&&N.style.setProperty("--br",p(b,o())?"50%":"0"),e!==_&&(_&&N.classList.remove(_),e&&N.classList.add(e))}}else L=!0;x&&!E&&clearTimeout(g),a.style.setProperty("--sh",h+"px"),c=T,r=n,s=k,u=y,i=b,f=l,_=e,x=E,A=h,z=w,L&&C()},destroy(){a.innerHTML="",clearTimeout(g)}}}var Ve=200,pa=800,ha=.1,ya=.3,Ye=.5,le=Math.abs,R=Math.random,te=Math.round,_a=Math.max,be=a=>document.createElement(a),xe=(a,t)=>a.appendChild(t),Xe=(a,t)=>Array.from({length:a},((r,c)=>({color:t[c%t.length],degree:360*c/a}))),X=(a,t=2)=>te((a+Number.EPSILON)*10**t)/10**t,ge=(a,t,r,c,s)=>(a-t)*(s-c)/(r-t)+c,Ze=(a,t)=>a+t>360?a+t-360:a+t,nt=()=>R()>.5,je=Object.entries,ba=6,xa=a=>a!==1&&nt(),ga=q('<meta name="description" content="A Wordle clone written in SvelteKit" class="svelte-115oxdy"/>'),wa=q('<div> <span class="visually-hidden svelte-115oxdy"><!></span> <input name="guess" type="hidden" class="svelte-115oxdy"/></div>'),Ea=q('<h2 class="visually-hidden svelte-115oxdy"> </h2> <div></div>',1),Aa=q('<p class="svelte-115oxdy"> </p>'),ka=q('<!> <button data-key="enter" class="restart selected svelte-115oxdy" formaction="?/restart"> </button>',1),Sa=q('<button formaction="?/update" name="key"> </button>'),Ta=q('<div class="row svelte-115oxdy"></div>'),Ma=q('<div class="keyboard svelte-115oxdy"><button data-key="enter">enter</button> <button data-key="backspace" formaction="?/update" name="key" value="backspace" class="svelte-115oxdy">back</button> <!></div>'),Ca=q('<div style="position: absolute; left: 50%; top: 30%" class="svelte-115oxdy"></div>'),Pa=q('<h1 class="visually-hidden svelte-115oxdy">Sverdle</h1> <form method="post" action="?/enter" class="svelte-115oxdy"><a class="how-to-play svelte-115oxdy" href="/sverdle/how-to-play">How to play</a> <div></div> <div class="controls svelte-115oxdy"><!></div></form> <!>',1);function Oa(a,t){qt(t,!0);let r=Xt(t,"form",15);const c=new ua("(prefers-reduced-motion: reduce)");let s=U(()=>t.data.answers.at(-1)==="xxxxx"),u=U(()=>d(s)?-1:t.data.answers.length),i=U(()=>t.data.guesses[d(u)]||""),f=U(()=>d(i).length===5);const _=U(()=>{let e={},n={};return t.data.answers.forEach((h,T)=>{const k=t.data.guesses[T];for(let w=0;w<5;w+=1){const E=k[w];h[w]==="x"?(e[E]="exact",n[E]="correct"):e[E]||(e[E]=h[w]==="c"?"close":"missing",n[E]=h[w]==="c"?"present":"absent")}}),{classnames:e,description:n}}),x=U(()=>d(_).classnames),A=U(()=>d(_).description);function z(e){e.preventDefault();const n=e.target.getAttribute("data-key");n==="backspace"?(He(i,d(i).slice(0,-1)),r()?.badGuess&&r(r().badGuess=!1,!0)):d(i).length<5&&He(i,d(i)+n)}function M(e){e.metaKey||e.key==="Enter"&&!d(f)||document.querySelector(`[data-key="${e.key}" i]`)?.dispatchEvent(new MouseEvent("click",{cancelable:!0,bubbles:!0}))}var S=Pa();Yt("keydown",Jt,M),Zt("115oxdy",e=>{var n=ga();Bt.title="Sverdle",H(e,n)});var o=O(j(S),2),p=O(G(o),2);let v;oe(p,20,()=>Array.from(Array(6).keys()),e=>e,(e,n)=>{const h=U(()=>n===d(u));var T=Ea(),k=j(T),w=G(k);D(k);var E=O(k,2);let L;oe(E,20,()=>Array.from(Array(5).keys()),P=>P,(P,I)=>{const N=U(()=>d(h)?d(i):t.data.guesses[n]),W=U(()=>t.data.answers[n]?.[I]),ae=U(()=>d(N)?.[I]??""),it=U(()=>d(h)&&I===d(N).length),Ae=U(()=>d(W)==="x"),ke=U(()=>d(W)==="c"),Se=U(()=>d(W)==="_");var re=wa();let Te;var Me=G(re),ue=O(Me),ot=G(ue);{var lt=K=>{var se=ie("(correct)");H(K,se)},ct=K=>{var se=Ne(),dt=j(se);{var ut=Q=>{var ne=ie("(present)");H(Q,ne)},ft=Q=>{var ne=Ne(),vt=j(ne);{var mt=V=>{var ve=ie("(absent)");H(V,ve)},pt=V=>{var ve=ie("empty");H(V,ve)};Y(vt,V=>{d(Se)?V(mt):V(pt,!1)},!0)}H(Q,ne)};Y(dt,Q=>{d(ke)?Q(ut):Q(ft,!1)},!0)}H(K,se)};Y(ot,K=>{d(Ae)?K(lt):K(ct,!1)})}D(ue);var fe=O(ue,2);jt(fe),D(re),J(()=>{Te=ee(re,1,"letter svelte-115oxdy",null,Te,{exact:d(Ae),close:d(ke),missing:d(Se),selected:d(it)}),$(Me,`${d(ae)??""} `),fe.disabled=!d(h),Le(fe,d(ae))}),H(P,re)}),D(E),J(()=>{$(w,`Row ${n+1}`),L=ee(E,1,"row svelte-115oxdy",null,L,{current:d(h)})}),H(e,T)}),D(p);var g=O(p,2),C=G(g);{var m=e=>{var n=ka(),h=j(n);{var T=E=>{var L=Aa(),P=G(L);D(L),J(()=>$(P,`the answer was "${t.data.answer??""}"`)),H(E,L)};Y(h,E=>{!d(s)&&t.data.answer&&E(T)})}var k=O(h,2),w=G(k);D(k),J(()=>$(w,`${d(s)?"you won :)":"game over :("} play again?`)),H(e,n)},y=e=>{var n=Ma(),h=G(n);let T;var k=O(h,2);k.__click=z;var w=O(k,2);oe(w,16,()=>["qwertyuiop","asdfghjkl","zxcvbnm"],E=>E,(E,L)=>{var P=Ta();oe(P,21,()=>L,na,(I,N)=>{var W=Sa();W.__click=z;var ae=G(W,!0);D(W),J(()=>{We(W,"data-key",d(N)),ee(W,1,ea(d(x)[d(N)]),"svelte-115oxdy"),W.disabled=d(f),Le(W,d(N)),We(W,"aria-label",`${d(N)??""} ${(d(A)[d(N)]||"")??""}`),$(ae,d(N))}),H(I,W)}),D(P),H(E,P)}),D(n),J(()=>{h.disabled=!d(f),T=ee(h,1,"svelte-115oxdy",null,T,{selected:d(f)})}),H(e,n)};Y(C,e=>{d(s)||t.data.answers.length>=6?e(m):e(y,!1)})}D(g),D(o),Ue(o,(e,n)=>va?.(e,n),()=>()=>({update:e})=>{e({reset:!1})});var b=O(o,2);{var l=e=>{var n=Ca();Ue(n,(h,T)=>ma?.(h,T),()=>({particleCount:c.current?0:void 0,force:.7,stageWidth:window.innerWidth,stageHeight:window.innerHeight,colors:["#ff3e00","#40b3ff","#676778"]})),H(e,n)};Y(b,e=>{d(s)&&e(l)})}J(()=>v=ee(p,1,"grid svelte-115oxdy",null,v,{playing:!d(s),"bad-guess":r()?.badGuess})),H(a,S),Gt()}Vt(["click"]);export{Oa as component};
